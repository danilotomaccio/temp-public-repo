<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Restituzione Attivit√† - IRHAM</title>
    <!-- Tailwind CSS per lo stile -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Stile per layout a schermo intero e scrolling */
      html,
      body {
        height: 100%;
        overflow: hidden; /* Impedisce lo scroll del body */
      }
      .custom-scrollbar::-webkit-scrollbar {
        width: 8px;
      }
      .custom-scrollbar::-webkit-scrollbar-track {
        background: #f8fafc;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb {
        background: #e2e8f0;
        border-radius: 10px;
      }
      .custom-scrollbar::-webkit-scrollbar-thumb:hover {
        background: #cbd5e1;
      }
    </style>
  </head>
  <body class="bg-gray-100 font-sans">
    <div class="flex h-screen">
      <!-- Pannello Sinistro: Sidebar Mock -->
      <nav class="w-64 h-full border-r border-gray-200 flex-col hidden md:flex">
        <div class="px-6 py-4 ">
          <img
            src="https://irham.com/wp-content/uploads/2023/03/logo-irham-medical-group.svg"
            alt="IRHAM Medical Group Logo"
            class="h-8"
          />
        </div>
        <div class="flex-grow p-4">
          <span class="px-4 text-xs font-bold text-gray-500 uppercase"
            >Pages</span
          >
          <ul class="mt-4 space-y-1">
            <li>
              <a
                href="#"
                class="flex items-center px-4 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100"
              >
                <svg
                  class="h-5 w-5 mr-3 text-gray-500"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                  />
                </svg>
                Dashboard
              </a>
            </li>
            <li>
              <a
                href="#"
                class="flex items-center px-4 py-2 text-sm font-medium text-red-700 bg-red-50 rounded-lg"
              >
                <svg
                  class="h-5 w-5 mr-3"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A10.99 10.99 0 0112 5.196a10.99 10.99 0 017 9.604m-7-9.604c-1.381 0-2.5 1.12-2.5 2.5s1.119 2.5 2.5 2.5 2.5-1.12 2.5-2.5S13.381 4.354 12 4.354z"
                  />
                </svg>
                Pazienti
              </a>
            </li>
            <li>
              <a
                href="#"
                class="flex items-center px-4 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100"
              >
                <svg
                  class="h-5 w-5 mr-3 text-gray-500"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
                Appuntamenti
              </a>
            </li>
            <li>
              <a
                href="#"
                class="flex items-center px-4 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100"
              >
                <svg
                  class="h-5 w-5 mr-3 text-gray-500"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                  />
                </svg>
                Risorse Umane
              </a>
            </li>
          </ul>
        </div>
      </nav>

      <!-- Area Principale dell'Applicazione -->
      <div class="flex-1 flex flex-col h-screen overflow-hidden">
        <!-- Header Mock -->
        <header
          class="h-16 border-b border-gray-200 flex items-center justify-between px-6 flex-shrink-0"
        >
          <div class="flex items-center">
            <button class="md:hidden mr-4">
              <svg
                class="h-6 w-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
            <div class="text-sm text-gray-600">
              <a href="#" class="hover:underline">Pazienti</a>
              <span class="mx-2 text-gray-400">/</span>
              <a href="#" class="hover:underline">ANTONIO SCASCIAMACCHIA</a>
              <span class="mx-2 text-gray-400">/</span>
              <span class="font-medium text-gray-800">SCXYZ-02</span>
              <span class="mx-2 text-gray-400">/</span>
              <span class="font-medium text-gray-800">Overview</span>
            </div>
          </div>
          <div class="flex items-center">
            <img
              class="h-9 w-9 rounded-full object-cover"
              src="https://placehold.co/100x100/E2E8F0/4A5568?text=AS"
              alt="Avatar utente"
            />
          </div>
        </header>

        <!-- Contenuto a due colonne -->
        <div
          class="flex-1 flex overflow-hidden flex-row align-center justify-center gap-4 m-4"
        >
          <div
            class="custom-side-bar w-full md:w-1/3 lg:w-1/4 h-full flex flex-col gap-4"
          >
            <div class="custom-side rounded-lg border bg-white">
              <div class="flex-grow p-4">
                <ul class="mt-4 space-y-1">
                  <li>
                    <a
                      href="#"
                      class="flex items-center px-4 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100"
                    >
                      <svg
                        class="h-5 w-5 mr-3 text-gray-500"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                        />
                      </svg>
                      Dashboard
                    </a>
                  </li>
                  <li>
                    <a
                      href="#"
                      class="flex items-center px-4 py-2 text-sm font-medium text-red-700 bg-red-50 rounded-lg"
                    >
                      <svg
                        class="h-5 w-5 mr-3"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197m0 0A10.99 10.99 0 0112 5.196a10.99 10.99 0 017 9.604m-7-9.604c-1.381 0-2.5 1.12-2.5 2.5s1.119 2.5 2.5 2.5 2.5-1.12 2.5-2.5S13.381 4.354 12 4.354z"
                        />
                      </svg>
                      Overview
                    </a>
                  </li>
                  <li>
                    <a
                      href="#"
                      class="flex items-center px-4 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100"
                    >
                      <svg
                        class="h-5 w-5 mr-3 text-gray-500"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                        />
                      </svg>
                      Qualcosa
                    </a>
                  </li>
                  <li>
                    <a
                      href="#"
                      class="flex items-center px-4 py-2 text-sm font-medium text-gray-700 rounded-lg hover:bg-gray-100"
                    >
                      <svg
                        class="h-5 w-5 mr-3 text-gray-500"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"
                        />
                      </svg>
                      Qualcos'altro
                    </a>
                  </li>
                </ul>
              </div>
            </div>

            <!-- Pannello Sinistro: Selezione Attivit√† -->
            <div
              class="activity-selection-panel rounded-lg border bg-white h-full overflow-y-auto"
            >
              <div class="p-6 border-b border-gray-200">
                <h2 class="text-xl font-bold text-gray-900">
                  Attivit√† da Visualizzare
                </h2>
                <p class="text-sm text-gray-600 mt-1">
                  Seleziona le attivit√† per vederne i dettagli.
                </p>
              </div>
              <div
                id="activity-selection-list"
                class="flex-grow overflow-y-auto p-6 space-y-3 custom-scrollbar h-full"
              >
                <!-- Le righe di selezione verranno inserite qui da JS -->
              </div>
            </div>
          </div>

          <!-- Pannello Destro: Dettagli e Azioni -->
          <main
            class="w-full md:w-2/3 lg:w-3/4 flex flex-col rounded-lg border bg-white"
          >
            <div
              id="overview-panel"
              class="flex-grow overflow-y-auto custom-scrollbar p-8"
            >
              <div
                id="overview-placeholder"
                class="flex flex-col items-center justify-center h-full text-center text-gray-500"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-16 w-16 text-gray-300 mb-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="1"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"
                  />
                </svg>
                <h3 class="text-lg font-semibold">
                  Nessuna attivit√† selezionata
                </h3>
                <p class="max-w-sm mt-1">
                  Scegli una o pi√π attivit√† dal pannello di sinistra.
                </p>
              </div>
              <div id="activity-overview-container" class="hidden">
                <!-- Le card di dettaglio verranno inserite qui da JS -->
              </div>
            </div>
          </main>
        </div>
      </div>
    </div>

    <script>
      // --- DATI DI ESEMPIO ---
      const sampleActivities = [
        {
          id: "v1",
          type: "Visita",
          codice: "VIS-2024-001",
          data: "2024-07-15",
          disabilita: ["Disturbo dello spettro autistico", "ADHD"],
          diagnosi:
            "La diagnosi iniziale suggerisce la necessit√† di un follow-up per determinare il percorso terapeutico pi√π adeguato.",
          valutazioniSpecialistiche: [
            {
              id: "vs1",
              codice: "VS-LOG-001",
              data: "2024-07-18",
              note: "Valutazione logopedica per analizzare le capacit√† comunicative.",
              allegati: [{ nome: "report_logopedico_1.pdf", url: "#" }],
            },
          ],
        },
        {
          id: "c1",
          type: "Colloquio",
          codice: "COL-2024-001",
          data: "2024-07-16",
          areeIntervento: ["Gestione ansia", "Supporto genitoriale"],
          note: "Il colloquio ha evidenziato una forte necessit√† di supporto per la gestione dello stress familiare.",
          valutazioniSpecialistiche: [],
        },
        {
          id: "c2",
          type: "Colloquio",
          codice: "COL-2024-002",
          data: "2024-07-22",
          areeIntervento: ["Relazioni sociali"],
          note: "Focus sulle difficolt√† di interazione con i pari.",
          valutazioniSpecialistiche: [
            {
              id: "vs2",
              codice: "VS-PSI-005",
              data: "2024-07-23",
              note: "Test proiettivo per esplorare la sfera emotiva.",
              allegati: [{ nome: "risultati_test.pdf", url: "#" }],
            },
            {
              id: "vs3",
              codice: "VS-OBS-002",
              data: "2024-07-24",
              note: "Osservazione comportamentale in ambiente strutturato.",
              allegati: [{ nome: "scheda_osservazione.docx", url: "#" }],
            },
          ],
        },
        {
          id: "v2",
          type: "Visita",
          codice: "VIS-2024-002",
          data: "2024-07-25",
          disabilita: ["Dislessia"],
          diagnosi:
            "Controllo periodico. Si notano miglioramenti nella lettura.",
          valutazioniSpecialistiche: [],
        },
      ];

      // --- STATO DELL'APPLICAZIONE ---
      let selectedActivityIds = [];
      let selectedAssessmentIds = [];

      // --- RIFERIMENTI AL DOM ---
      const activitySelectionList = document.getElementById(
        "activity-selection-list"
      );
      const overviewPlaceholder = document.getElementById(
        "overview-placeholder"
      );
      const activityOverviewContainer = document.getElementById(
        "activity-overview-container"
      );
      const restitutionActions = document.getElementById("restitution-actions");
      const attachmentsCounter = document.getElementById("attachments-counter");

      // --- FUNZIONI DI RENDERING ---

      function createActivitySelectionRowHTML(activity) {
        const isSelected = selectedActivityIds.includes(activity.id);
        const typeColor =
          activity.type === "Visita"
            ? "bg-teal-100 text-teal-800"
            : "bg-amber-100 text-amber-800";
        const selectedClasses = isSelected
          ? "bg-indigo-50 border-indigo-400 ring-2 ring-indigo-300"
          : "bg-white border-gray-200 hover:bg-gray-100";
        const formattedDate = new Date(activity.data).toLocaleDateString(
          "it-IT"
        );

        let assessmentIndicatorHTML = "";
        if (activity.valutazioniSpecialistiche?.length > 0) {
          const count = activity.valutazioniSpecialistiche.length;
          const label = count === 1 ? "valutazione" : "valutazioni";
          assessmentIndicatorHTML = `<div class="flex items-center text-xs text-sky-700 mt-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5 shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" /></svg><span class="font-medium">${count} ${label} presente/i</span></div>`;
        }

        return `<label for="activity-${activity.id}" data-id="${
          activity.id
        }" class="activity-row flex items-center p-4 border rounded-lg cursor-pointer transition-all duration-200 ${selectedClasses}"><input id="activity-${
          activity.id
        }" type="checkbox" ${
          isSelected ? "checked" : ""
        } class="h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded pointer-events-none"><div class="ml-4 flex-grow"><div class="flex justify-between items-center"><span class="text-xs font-bold uppercase px-2 py-1 rounded-full ${typeColor}">${
          activity.type
        }</span><span class="text-sm font-medium text-gray-800">${
          activity.codice
        }</span></div><p class="text-sm text-gray-500 mt-1">Data: ${formattedDate}</p>${assessmentIndicatorHTML}</div></label>`;
      }

      function createSpecialistAssessmentCardHTML(assessment) {
        const formattedDate = new Date(assessment.data).toLocaleDateString(
          "it-IT"
        );
        const isChecked = selectedAssessmentIds.includes(assessment.id);
        const attachmentIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1.5 inline-block text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13" /></svg>`;

        let attachmentsHTML = "";
        if (assessment.allegati?.length > 0) {
          attachmentsHTML = `<div class="mt-3"><ul class="list-none pl-0">${assessment.allegati
            .map(
              (file) =>
                `<li class="mb-1"><a href="${file.url}" class="text-sm text-indigo-600 hover:underline hover:text-indigo-800 transition-colors duration-200 flex items-center">${attachmentIcon} ${file.nome}</a></li>`
            )
            .join("")}</ul></div>`;
        }

        return `<div class="bg-gray-100 border border-gray-200 rounded-md p-4 mt-4 relative"><div class="absolute top-3 right-3">
            </div><p class="text-xs text-gray-500 mb-2">${
          assessment.codice
        } - ${formattedDate}</p><p class="text-gray-800 pr-8">${
          assessment.note
        }</p>${attachmentsHTML}</div>`;
      }

      function createActivityDetailCardHTML(activity) {
        const isVisita = activity.type === "Visita";
        const formattedDate = new Date(activity.data).toLocaleDateString(
          "it-IT"
        );
        const tagClasses =
          "inline-block bg-sky-100 text-sky-800 text-sm font-medium mr-2 mb-2 px-2.5 py-0.5 rounded-full";

        let parentCheckboxHTML = "";
        if (activity.valutazioniSpecialistiche?.length > 0) {
          parentCheckboxHTML = `<div class="absolute top-4 right-4" title="Seleziona/Deseleziona tutte le valutazioni annesse"><input type="checkbox" data-activity-id="${activity.id}" class="parent-checkbox h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-400 rounded"></div>`;
        }

        let assessmentsHTML = "";
        if (activity.valutazioniSpecialistiche?.length > 0) {
          assessmentsHTML = `<div class="mt-6 border-t border-gray-200 pt-4"><h4 class="text-lg font-semibold text-gray-700 mb-3">Valutazioni Specialistiche Annesse</h4>${activity.valutazioniSpecialistiche
            .map(createSpecialistAssessmentCardHTML)
            .join("")}</div>`;
        }

        return `<div class="bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm relative"><h3 class="text-xl font-bold text-gray-800 mb-1">${
          activity.type
        }</h3><p class="text-sm text-gray-500 mb-4">${
          activity.codice
        } - ${formattedDate}</p>${
          isVisita
            ? `<div><h4 class="text-md font-semibold text-gray-700 mt-4 mb-2">Disabilit√†</h4><div class="flex flex-wrap">${activity.disabilita
                .map((item) => `<span class="${tagClasses}">${item}</span>`)
                .join(
                  ""
                )}</div></div><div><h4 class="text-md font-semibold text-gray-700 mt-4 mb-2">Diagnosi</h4><p class="text-gray-600">${
                activity.diagnosi
              }</p></div>`
            : `<div><h4 class="text-md font-semibold text-gray-700 mt-4 mb-2">Aree d'intervento</h4><div class="flex flex-wrap">${activity.areeIntervento
                .map((item) => `<span class="${tagClasses}">${item}</span>`)
                .join(
                  ""
                )}</div></div><div><h4 class="text-md font-semibold text-gray-700 mt-4 mb-2">Note</h4><p class="text-gray-600">${
                activity.note
              }</p></div>`
        }${assessmentsHTML}</div>`;
      }

      function renderAll() {
        activitySelectionList.innerHTML = sampleActivities
          .map(createActivitySelectionRowHTML)
          .join("");
        document.querySelectorAll(".activity-row").forEach((row) => {
          row.addEventListener("click", () =>
            handleActivitySelection(row.dataset.id)
          );
        });

        const selectedActivities = sampleActivities.filter((act) =>
          selectedActivityIds.includes(act.id)
        );
        if (selectedActivities.length > 0) {
          overviewPlaceholder.classList.add("hidden");
          activityOverviewContainer.classList.remove("hidden");
          activityOverviewContainer.innerHTML = selectedActivities
            .map(createActivityDetailCardHTML)
            .join("");
        } else {
          overviewPlaceholder.classList.remove("hidden");
          activityOverviewContainer.classList.add("hidden");
          activityOverviewContainer.innerHTML = "";
        }

        const count = selectedAssessmentIds.length;
        const label = count === 1 ? "valutazione" : "valutazioni";
        attachmentsCounter.textContent = `Verranno allegate ${count} ${label}.`;

        updateCheckboxesState();
      }

      function updateCheckboxesState() {
        document.querySelectorAll(".assessment-checkbox").forEach((cb) => {
          cb.addEventListener("change", (e) =>
            handleAssessmentSelection(e.target.dataset.assessmentId)
          );
        });

        document.querySelectorAll(".parent-checkbox").forEach((cb) => {
          const activityId = cb.dataset.activityId;
          const activity = sampleActivities.find((a) => a.id === activityId);
          const childAssessmentIds = activity.valutazioniSpecialistiche.map(
            (v) => v.id
          );
          const selectedChildrenCount = childAssessmentIds.filter((id) =>
            selectedAssessmentIds.includes(id)
          ).length;

          cb.checked =
            selectedChildrenCount > 0 &&
            selectedChildrenCount === childAssessmentIds.length;
          cb.indeterminate =
            selectedChildrenCount > 0 &&
            selectedChildrenCount < childAssessmentIds.length;

          cb.addEventListener("change", () =>
            handleParentSelection(activityId)
          );
        });
      }

      function handleActivitySelection(id) {
        const index = selectedActivityIds.indexOf(id);
        if (index > -1) {
          selectedActivityIds.splice(index, 1);
        } else {
          selectedActivityIds.push(id);
        }
        renderAll();
      }

      function handleAssessmentSelection(assessmentId) {
        const index = selectedAssessmentIds.indexOf(assessmentId);
        if (index > -1) {
          selectedAssessmentIds.splice(index, 1);
        } else {
          selectedAssessmentIds.push(assessmentId);
        }
        renderAll();
      }

      function handleParentSelection(activityId) {
        const activity = sampleActivities.find((a) => a.id === activityId);
        const childAssessmentIds = activity.valutazioniSpecialistiche.map(
          (v) => v.id
        );
        const allSelected = childAssessmentIds.every((id) =>
          selectedAssessmentIds.includes(id)
        );

        if (allSelected) {
          selectedAssessmentIds = selectedAssessmentIds.filter(
            (id) => !childAssessmentIds.includes(id)
          );
        } else {
          childAssessmentIds.forEach((id) => {
            if (!selectedAssessmentIds.includes(id)) {
              selectedAssessmentIds.push(id);
            }
          });
        }
        renderAll();
      }

      document.addEventListener("DOMContentLoaded", renderAll);
    </script>
  </body>
</html>
